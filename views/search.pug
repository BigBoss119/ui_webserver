html
	head
		script(src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js")


	style
		include custom.css

	body
		include nav.pug

	div(class='block' style='margin-top: 50px;') 
		p Search user:

		div(style='display: table-caption; padding: 0px 0px 25px 73px;')

			form(method='POST' action='/search')
			
				label Searchbar:
				input(type='text' name='autocomplete' list='results')
				datalist(id='results')

				input(type='submit' value='submit' ) 

				p  #{firstname} #{secondname} #{email}

				p(id="sup")

	script.
		$(document).ready(function() {
			console.log ("Ready")
			var timeOut = true
			$("#autocomplete").keyup( function (e) { 
				var peter = {input: e.target.value}
				$.ajax({
					type: "POST",
					url: "/search",
					data: peter,
					dataType: "json",
					success: function(result){
						$("#sup").html(result.input)
						console.log("The Result", result.search)
					},
					error: function(err){
						console.log(err)
					}
				})
			})
			setInterval (function () {
			timeOut = true
			console.log("Time out is true")
		}, 300)
		})